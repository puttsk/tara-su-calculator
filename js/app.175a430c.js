(function(t){function e(e){for(var n,i,l=e[0],c=e[1],o=e[2],d=0,m=[];d<l.length;d++)i=l[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&m.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(m.length)m.shift()();return r.push.apply(r,o||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],n=!0,l=1;l<s.length;l++){var c=s[l];0!==a[c]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=s[0]))}return t}var n={},a={app:0},r=[];function i(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=n,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/tara-su-calculator/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var o=0;o<l.length;o++)e(l[o]);var u=c;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var n=s("64a9"),a=s.n(n);a.a},5347:function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var n=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"page-container"},[s("md-app",[s("md-app-toolbar",{staticClass:"md-primary"},[s("span",{staticClass:"md-title"},[t._v("Tara Pricing Calculator")])]),s("md-app-content",[s("tara-calculator")],1)],1)],1),t._m(0)])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"footer"}},[s("a",{attrs:{href:"https://github.com/puttsk/tara-su-calculator"}},[s("b",[t._v("Github")])]),t._v("\n     \n    "),s("a",{attrs:{href:"https://github.com/puttsk/tara-su-calculator"}},[s("b",[t._v("About")])]),s("br"),t._v("\n    © 2019 ThaiSC. Currently v0.1.2 Code licensed MIT.\n  ")])}],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"md-layout",staticStyle:{float:"left","margin-right":"20px"}},[s("div",{staticStyle:{padding:"10px"}},[s("div",{staticClass:"md-title cal-title"},[t._v("TARA SU Calculator")]),s("table",[t._l(t.projects,function(e,n){return[s("tr",{key:n+"-label"},[s("md-field",{staticClass:"col-field"},[s("label",[t._v("Project Name")]),s("md-input",{attrs:{type:"string"},model:{value:e.name,callback:function(s){t.$set(e,"name",s)},expression:"project.name"}})],1)],1),s("tr",{key:n+"-project"},[s("th",[t._v("Type")]),s("th",{staticClass:"num-col"},[s("md-field",{staticClass:"col-field"},[s("span",{staticClass:"md-prefix th-field"},[t._v("Time (")]),s("md-select",{attrs:{"md-dense":""},model:{value:e.timeUnit,callback:function(s){t.$set(e,"timeUnit",s)},expression:"project.timeUnit"}},t._l(t.timeFactor,function(e,n){return s("md-option",{key:n,attrs:{value:n}},[t._v("\n                    "+t._s(n)+"\n                  ")])}),1),s("span",{staticClass:"md-suffix th-field"},[t._v(")")])],1)],1),s("th",{staticClass:"num-col"},[s("md-field",[s("span",{staticClass:"md-prefix th-field"},[t._v("Usage (")]),s("md-input",{staticStyle:{"text-align":"right",width:"45px"},attrs:{type:"number"},model:{value:e.runs,callback:function(s){t.$set(e,"runs",s)},expression:"project.runs"}}),s("span",{staticClass:"md-suffix th-field"},[t._v("runs)")])],1)],1),s("th",{staticClass:"num-col long"},[t._v("SU")]),s("th",{staticClass:"num-col long"},[t._v("Cost (THB)")]),s("th",{staticClass:"num-col long"},[t._v("\n              Discount\n              "),s("md-field",[s("md-input",{staticStyle:{"text-align":"right",width:"20px"},attrs:{type:"number"},model:{value:t.discountPercent,callback:function(e){t.discountPercent=e},expression:"discountPercent"}}),s("span",{staticClass:"md-suffix th-field"},[t._v("%")])],1)],1)]),t._l(e.partitions,function(a,r){return s("tr",{key:n+"-"+r+"-object"},[s("td",[t._v(t._s(a.name))]),s("td",{staticClass:"num-col"},[s("md-field",[s("md-input",{staticClass:"number-field",attrs:{type:"number"},model:{value:a.walltime,callback:function(e){t.$set(a,"walltime",e)},expression:"partition.walltime"}}),s("span",{staticClass:"md-suffix inline-field"},[t._v("\n                  "+t._s(e.timeUnit)+"\n                ")])],1)],1),s("td",{staticClass:"num-col"},[s("md-field",[s("md-input",{staticClass:"number-field",attrs:{type:"number"},model:{value:a.usage,callback:function(e){t.$set(a,"usage",e)},expression:"partition.usage"}}),s("span",{staticClass:"md-suffix inline-field",staticStyle:{width:"35px"}},[t._v("\n                  "+t._s(a.unit)+"\n                ")])],1)],1),s("td",{staticClass:"num-col border-left"},[t._v("\n              "+t._s(t._f("roundup")(a.walltime*t.timeFactor[e.timeUnit]*a.usage*e.runs*a.suFactor))+"\n            ")]),s("td",{staticClass:"num-col"},[t._v("\n              "+t._s(t._f("roundup")(a.walltime*t.timeFactor[e.timeUnit]*a.usage*e.runs*a.suFactor*t.pricePerSU))+"\n            ")]),s("td",{staticClass:"num-col"},[t._v("\n              "+t._s(t._f("roundup")(a.walltime*t.timeFactor[e.timeUnit]*a.usage*e.runs*a.suFactor*t.pricePerSU*(100-t.discountPercent)/100))+"\n            ")])])}),t.projects.length>1?[s("tr",{key:n+"-subtotal-space",staticStyle:{"line-height":"10px"}},[s("td"),s("td"),s("td"),s("td",{staticClass:"num-col border-left"}),s("td",[t._v(" ")])]),s("tr",{key:n+"-subtotal",staticClass:"row-subtotal"},[s("td"),s("td"),t._m(0,!0),s("td",{staticClass:"num-col border-left subtotal"},[t._v("\n                "+t._s(t._f("roundup")(t._f("sumSU")([e])))+"\n              ")]),s("td",{staticClass:"num-col subtotal"},[t._v("\n                "+t._s(t._f("roundup")(t._f("sumCost")([e])))+"\n              ")]),s("td",{staticClass:"num-col subtotal"},[t._v("\n                "+t._s(t._f("roundup")(t._f("sumDiscount")([e],t.discountPercent)))+"\n              ")])])]:[s("tr",{key:n+"-subtotal-space",staticStyle:{"line-height":"10px"}},[s("td"),s("td"),s("td"),s("td",{staticClass:"num-col border-left"}),s("td",[t._v(" ")])])]]}),s("tr",{staticClass:"row-sum"},[s("td"),s("td"),t._m(1),s("td",{staticClass:"num-col"},[t._v(t._s(t._f("roundup")(t._f("sumSU")(t.projects))))]),s("td",{staticClass:"num-col"},[t._v(t._s(t._f("roundup")(t._f("sumCost")(t.projects))))]),s("td",{staticClass:"num-col"},[t._v("\n            "+t._s(t._f("roundup")(t._f("sumDiscount")(t.projects,t.discountPercent)))+"\n          ")])])],2),s("div",{staticStyle:{"text-align":"right"}},[s("br"),s("md-button",{staticClass:"md-dense md-raised md-primary",on:{click:t.addProject}},[t._v("\n          Add Project\n        ")]),s("md-button",{staticClass:"md-dense md-raised md-primary",on:{click:t.reset}},[t._v("\n          Reset\n        ")])],1)])]),s("md-card",{staticStyle:{"margin-top":"60px"}},[s("md-card-header",[s("div",{staticClass:"md-title"},[t._v("Pricing")])]),s("md-card-content",[s("md-table",[s("tr",[s("th",{staticStyle:{"min-width":"140px"}},[t._v("Type")]),s("th",{staticClass:"num-col"},[t._v("Unit")]),s("th",{staticClass:"num-col long"},[t._v("SU/Unit-Min")])]),t._l(t.projectTemplate.partitions,function(e,n){return[s("tr",{key:n+"-type"},[s("td",[t._v(t._s(e.name))]),s("td",{staticClass:"num-col"},[t._v(t._s(e.unit))]),s("td",{staticClass:"num-col"},[t._v(t._s(e.suFactor))])])]})],2),s("br"),s("b",[t._v("Price per SU: ")]),t._v(" "+t._s(t.pricePerSU)+" THB\n    ")],1)],1)],1)},l=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"num-col"},[s("b",[t._v("Subtotal:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"num-col"},[s("b",[t._v("Total:")])])}],c=(s("a481"),{runs:1,name:"Project1",timeUnit:"mins",partitions:[{name:"compute",walltime:1,usage:1,suFactor:1,unit:"cores"},{name:"memory",walltime:0,usage:0,suFactor:1.25,unit:"cores"},{name:"memory",walltime:0,usage:0,suFactor:.08,unit:"GB"},{name:"memory-preempt",walltime:0,usage:0,suFactor:.5,unit:"cores"},{name:"memory-preempt",walltime:0,usage:0,suFactor:.032,unit:"GB"},{name:"gpu",walltime:0,usage:0,suFactor:130,unit:"nodes"},{name:"dgx",walltime:0,usage:0,suFactor:815,unit:"nodes"},{name:"dgx-preempt",walltime:0,usage:0,suFactor:400,unit:"nodes"}]}),o=.045,u=0,d={mins:1,hrs:60,days:1440},m={name:"TaraCalculator",data:function(){return{discountPercent:u,pricePerSU:o,projects:[JSON.parse(JSON.stringify(c))],projectTemplate:c,timeFactor:d}},props:{},filters:{roundup:function(t){return t?t.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","):"0.00"},sumSU:function(t){for(var e=0,s=0;s<t.length;s++)for(var n=0;n<t[s].partitions.length;n++){var a=t[s].partitions[n];e+=a.walltime*d[t[s].timeUnit]*a.usage*t[s].runs*a.suFactor}return e},sumCost:function(t){for(var e=0,s=0;s<t.length;s++)for(var n=0;n<t[s].partitions.length;n++){var a=t[s].partitions[n];e+=a.walltime*d[t[s].timeUnit]*a.usage*t[s].runs*a.suFactor*o}return e},sumDiscount:function(t,e){for(var s=0,n=0;n<t.length;n++)for(var a=0;a<t[n].partitions.length;a++){var r=t[n].partitions[a];s+=r.walltime*d[t[n].timeUnit]*r.usage*t[n].runs*r.suFactor*o}return s*(100-e)/100}},methods:{addProject:function(){var t=JSON.parse(JSON.stringify(c));t.name="Project"+(this.projects.length+1),this.projects.push(t)},reset:function(){this.projects=[JSON.parse(JSON.stringify(c))]}}},p=m,f=(s("9c49"),s("2877")),_=Object(f["a"])(p,i,l,!1,null,"30525c52",null),v=_.exports,h={name:"app",components:{TaraCalculator:v}},g=h,b=(s("034f"),Object(f["a"])(g,a,r,!1,null,null,null)),y=b.exports,C=s("43f9"),x=s.n(C);s("51de"),s("e094");n["default"].config.productionTip=!1,n["default"].use(x.a),new n["default"]({render:function(t){return t(y)}}).$mount("#app")},"64a9":function(t,e,s){},"9c49":function(t,e,s){"use strict";var n=s("5347"),a=s.n(n);a.a}});
//# sourceMappingURL=app.175a430c.js.map